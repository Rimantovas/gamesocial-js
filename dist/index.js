'use strict';

var react = require('react');
var jsxRuntime = require('react/jsx-runtime');
var Pt = require('axios');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var Pt__default = /*#__PURE__*/_interopDefault(Pt);

var ot=Object.defineProperty,nt=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var G=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&G(e,r,t[r]);if(F)for(var r of F(t))dt.call(t,r)&&G(e,r,t[r]);return e},g=(e,t)=>nt(e,st(t));var A=(e,t,r)=>new Promise((i,a)=>{var u=c=>{try{n(r.next(c));}catch(o){a(o);}},_=c=>{try{n(r.throw(c));}catch(o){a(o);}},n=c=>c.done?i(c.value):Promise.resolve(c.value).then(u,_);n((r=r.apply(e,t)).next());});var C=(a=>(a.created="created",a.pending="pending",a.completed="completed",a.failed="failed",a))(C||{}),ut=(a=>(a.created="created",a.started="started",a.completed="completed",a.failed="failed",a))(ut||{});var O=(n=>(n.NO_PARTICIPANT="NO_PARTICIPANT",n.START="START",n.CLAIM="CLAIM",n.PENDING="PENDING",n.COMPLETED="COMPLETED",n.FAILED="FAILED",n.AUTH_REQUIRED="AUTH_REQUIRED",n))(O||{});var T=(p=>(p.telegram_join="telegram_join",p.telegram_connect="telegram_connect",p.youtube_view="youtube_view",p.image_upload="image_upload",p.twitter_repost="twitter_repost",p.twitter_follow="twitter_follow",p.twitter_reply="twitter_reply",p.twitter_like="twitter_like",p.twitter_activity="twitter_activity",p.twitter_connect="twitter_connect",p.discord_join="discord_join",p.discord_connect="discord_connect",p.submit_string="submit_string",p.manual="manual",p.daily_login="daily_login",p.open_url="open_url",p.youtube_subscribe="youtube_subscribe",p.twitch_follow="twitch_follow",p))(T||{});var N=react.createContext({apiUrl:"",apiKey:"",authToken:void 0,setAuthToken:()=>{}}),y=()=>react.useContext(N);function j({children:e,state:t,apiKey:r,apiUrl:i}){return t!=null||(t=_t(r,i)),jsxRuntime.jsx(N.Provider,{value:t,children:e})}var _t=(e,t)=>{let[r,i]=react.useState({apiUrl:t,apiKey:e,userAuthToken:void 0}),a=r.userAuthToken,u=react.useCallback(_=>{i(n=>g(w({},n),{userAuthToken:_}));},[]);return {apiUrl:t,apiKey:e,authToken:a,setAuthToken:u}};var v=()=>{let{authToken:e,apiUrl:t,apiKey:r}=y(),i=()=>{let _=Pt__default.default.create({baseURL:t,timeout:1e4,headers:{"Api-Key":r,"Api-Version":"1.0"}});return _.interceptors.request.use(n=>{let c=e;return c&&(n.headers.Authorization=`Bearer ${c}`),n},n=>Promise.reject(n)),_.interceptors.response.use(n=>n,n=>(n.response&&n.response.status===401&&localStorage.removeItem("token"),Promise.reject(n))),_},[a,u]=react.useState(i());return react.useEffect(()=>{u(i());},[t,r,e]),a};var x={discord_not_connected:"Discord account is not connected",discord_guild_user_not_found:"Discord user not found in channel ",discord_guild_required_role_not_exists:"Discord channel verification must be passed",discord_guild_user_is_pending:"Please validate that your accepted Terms of Discord channel",discord_unauthenticated:"Please re-authenticate your discord account",telegram_not_connected:"Telegram account is not connected",telegram_member_not_found:"Telegram account not found in group",telegram_unauthenticated:"Please re-authenticate your telegram account",twitter_not_connected:"X account is not connected",twitter_follower_not_found:"Your X account do not follow required account",twitter_unauthenticated:"Please re-authenticate your X account",youtube_invalid_video_watch_length:"Please watch whole video",file_not_provided:"File not provided",file_size_exceeds:"File size exceeds limit",invalid_file_type:"Invalid file type",mission_not_found:"Mission not found",mission_not_started:"Mission not started",mission_ended:"Mission ended",task_not_found:"Task not found",task_inactive:"Task inactive",participant_not_found:"Participant not found",third_party_unauthenticated:"Please re-authenticate your account",invalid_email:"Invalid email address",invalid_value:"Invalid value",invalid_captcha:"Invalid captcha"},K=e=>e===x.discord_unauthenticated||e===x.telegram_unauthenticated||e===x.twitter_unauthenticated;var Y=react.createContext({missions:[],tasks:[],getTasksForMission:()=>[],updateTaskStatus:()=>{},maintenance:!1}),$=()=>react.useContext(Y);function H({children:e,state:t}){return t!=null||(t=yt()),jsxRuntime.jsx(Y.Provider,{value:t,children:e})}var yt=()=>{let[e,t]=react.useState([]),[r,i]=react.useState([]),{authToken:a}=y(),u=v(),[_,n]=react.useState(!1);react.useEffect(()=>{c();},[a]),react.useEffect(()=>{e.length>0&&o(e.map(d=>d.id));},[e]),react.useEffect(()=>{a&&a.length===0&&n(!0);},[a]);let c=()=>{u.get("missions").then(function(d){t(d.data);}).catch(function(){n(!0);}).finally(function(){});},o=d=>{let m=d.map(f=>u.get(`missions/${f}/tasks`));Promise.all(m).then(function(f){let P=new Set(Object.values(T)),h=f.map(k=>k.data).flat().filter(k=>P.has(k.type));i(h);}).catch(function(){n(!0);});},s=(d,m)=>{i(r.map(f=>f.id===d?g(w({},f),{participation:{status:m}}):f));},l=react.useCallback(d=>r.filter(m=>m.mission_id===d),[r]);return {missions:e,tasks:r,getTasksForMission:l,updateTaskStatus:s,maintenance:_}};var q=(r=>(r.points="points",r.multiplier="multiplier",r))(q||{});var J=react.createContext({participant:void 0,isThirdPartyAuthenticated:()=>!1,addPoints:()=>{},getParticipant:()=>{}}),M=()=>react.useContext(J);function z({children:e,state:t,errorCallback:r}){return t!=null||(t=Mt(r)),jsxRuntime.jsx(J.Provider,{value:t,children:e})}var Mt=e=>{let[t,r]=react.useState(),{authToken:i}=y(),a=v();react.useEffect(()=>{i?u():r(void 0);},[i]);let u=()=>{a.get("participants/me").then(function(c){r(c.data);}).catch(function(c){console.error(c),e&&e(c);});};return {participant:t,isThirdPartyAuthenticated:c=>!!(t!=null&&t.authenticated.includes(c)),addPoints:c=>{c.points_reward&&r(o=>{var s;if(o)if(c.reward_type==="points"){let l=Math.floor(c.points_reward*((s=t==null?void 0:t.points_multiplier)!=null?s:1));r(d=>{if(d)return g(w({},d),{points:(d==null?void 0:d.points)+l})});}else r(l=>{if(l)return g(w({},l),{points_multiplier:(l==null?void 0:l.points_multiplier)+c.points_reward})});});},getParticipant:u}};var V=react.createContext({isParticipationLoading:!1,participate:()=>Promise.resolve(!1)}),W=()=>react.useContext(V);function X({children:e,state:t,errorCallback:r}){return t!=null||(t=Dt(r)),jsxRuntime.jsx(V.Provider,{value:t,children:e})}var Dt=e=>{let[t,r]=react.useState(!1),{updateTaskStatus:i}=$(),{addPoints:a,getParticipant:u}=M(),_=v(),n=o=>{var l,d,m,f,P,h,k,p;let s="";(d=(l=o==null?void 0:o.response)==null?void 0:l.data)!=null&&d.message?typeof((f=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:f.message)=="string"&&(s=(h=(P=o==null?void 0:o.response)==null?void 0:P.data)==null?void 0:h.message.toString()):(k=o==null?void 0:o.response)!=null&&k.message&&(s=(p=o==null?void 0:o.response)==null?void 0:p.message.toString()),s?s in x?(K(s)&&u(),e&&e(x[s])):e&&e(s):e&&e("Server error, please try again later");};return {isParticipationLoading:t,participate:(o,s,l)=>A(void 0,null,function*(){r(!0);let d=w({},s);if(s!=null&&s.file){let m=yield fetch(s.file).then(f=>f.blob()).then(f=>{let P=new FileReader;return P.readAsDataURL(f),new Promise(h=>{P.onloadend=()=>{h(P.result);};})});d=g(w({},s),{file:{imageSrc:m}});}return yield _.post(`tasks/${o.id}`,s?d:void 0).then(function(m){return i(o.id,m.data.status),m.data.status==="completed"&&o.points_reward&&a(o),l&&l(),!0}).catch(function(m){n(m);}).finally(function(){r(!1);}),!1})}};var S=(i=>(i.twitter="twitter",i.telegram="telegram",i.discord="discord",i))(S||{});var Q=()=>{let e=new URL(window.location.href);return e.search="",e.href};var B=Object.fromEntries(Object.values(S).map(e=>[e,!1])),tt=react.createContext({isLoading:!1,authenticated:B,authenticate:()=>({}),isAuthenticated:()=>!1}),et=()=>react.useContext(tt);function rt({children:e,state:t,errorCallback:r}){return t!=null||(t=Nt(r)),jsxRuntime.jsx(tt.Provider,{value:t,children:e})}var Nt=e=>{let[t,r]=react.useState(B),[i,a]=react.useState(!1),{participant:u}=M(),_=v();return react.useEffect(()=>{let o=Object.fromEntries(Object.values(S).map(s=>[s,!!(u!=null&&u.authenticated.includes(s))]));r(o);},[u]),{isLoading:i,authenticated:t,authenticate:o=>{a(!0),_.get(`auth/${o}`,{params:{redirect_url:Q()}}).then(function(s){if(s.data.url){if(s.data.url.includes("?error="))throw new Error("Failed to authenticate with ThirdPartyAuth: "+s.data.url.split("?error=")[1]);window.location.href=s.data.url;}}).catch(function(s){console.error(s),e&&e(s);}).finally(()=>{a(!1);});},isAuthenticated:o=>t[o]||!1}};var Yt=e=>{var U;let{task:t,participationDisabled:r,maintenance:i,children:a,callbacks:u,onSuccess:_}=e,[n,c]=react.useState(!1),{participate:o,isParticipationLoading:s}=W(),l=et(),d=t.participation&&t.participation.status==="completed",m=()=>A(void 0,null,function*(){switch(t.type){case"discord_join":window.open(t.metadata.invite_url,"_blank");break;case"twitter_follow":window.open(`https://twitter.com/intent/follow?screen_name=${t.metadata.username}`,"_blank");break;case"twitter_like":window.open(t.metadata.post_url,"_blank");break;case"twitter_reply":window.open(t.metadata.post_url,"_blank");break;case"twitter_repost":window.open(`https://twitter.com/intent/retweet?tweet_id=${t.metadata.post_id}`,"_blank");break;case"telegram_join":window.open(`https://t.me/${t.metadata.username}`,"_blank");break;case"image_upload":let b=yield u.onFileUpload(t);h({file:b});return;case"submit_string":let I=yield u.onSubmitString(t);h({value:I});return;case"open_url":window.open(t.metadata.url,"_blank");break;case"youtube_view":let at=yield u.onYoutubeView(t,t.metadata.video_id);h({seconds:at});return;case"daily_login":h();return;case"twitch_follow":window.open(t.metadata.twitch_url,"_blank");break;case"youtube_subscribe":window.open(t.metadata.channel_url,"_blank");break}c(!0);}),f=()=>{switch(t.type){case"discord_connect":case"discord_join":return l.isAuthenticated("discord");case"twitter_connect":case"twitter_follow":case"twitter_like":case"twitter_reply":case"twitter_repost":return l.isAuthenticated("twitter");case"telegram_connect":case"telegram_join":return l.isAuthenticated("telegram");default:return !0}},P=()=>{switch(t.type){case"discord_connect":case"discord_join":return l.authenticate("discord");case"twitter_connect":case"twitter_follow":case"twitter_like":case"twitter_reply":case"twitter_repost":return l.authenticate("twitter");case"telegram_connect":case"telegram_join":return l.authenticate("telegram")}},h=b=>A(void 0,null,function*(){(yield o(t,b,_))||c(!1);}),k=()=>{r||i||d||(f()?n?h():m():P());},p=()=>{var b,I;return d?"COMPLETED":t.participation?((b=t.participation)==null?void 0:b.status)==="pending"?"PENDING":((I=t.participation)==null?void 0:I.status)==="failed"?"FAILED":n?"CLAIM":f()?"START":"AUTH_REQUIRED":"NO_PARTICIPANT"};return a({onClick:!!(d||i||r||t.type==="manual"||t.type==="twitter_activity")?void 0:k,type:p(),isLoading:l.isLoading||s,disabled:r||i,comment:(U=t.participation)==null?void 0:U.comment})},$t=e=>{let{task:t,participationDisabled:r,maintenance:i,errorCallback:a,onSuccess:u}=e;return jsxRuntime.jsx(X,{errorCallback:a,children:jsxRuntime.jsx(rt,{errorCallback:a,children:jsxRuntime.jsx(Yt,{task:t,participationDisabled:r,maintenance:i,callbacks:e.callbacks,onSuccess:u,children:e.children})})})},Ht=$t;var qt=(i=>(i.guaranteed="guaranteed",i.scoreboard="scoreboard",i.lottery="lottery",i))(qt||{}),Jt=(i=>(i.crypto="crypto",i.points="points",i.points_per_task="points_per_task",i))(Jt||{});var zt=(a=>(a.participant_reward_added="participant_reward_added",a.participant_reward_removed="participant_reward_removed",a.third_party_authenticated="third_party_authenticated",a.task_completed="task_completed",a))(zt||{});var Vt=(r=>(r.email="email",r.is_equal="is_equal",r))(Vt||{});var Tr=({children:e,apiKey:t,apiUrl:r,errorCallback:i})=>jsxRuntime.jsx(j,{apiKey:t,apiUrl:r,children:jsxRuntime.jsx(z,{errorCallback:i,children:jsxRuntime.jsx(H,{children:e})})});

exports.GamesocialProvider = j;
exports.MissionRewardType = Jt;
exports.MissionType = qt;
exports.MissionsProvider = H;
exports.ParticipantMissionStatus = ut;
exports.ParticipantProvider = z;
exports.ParticipantTaskStatus = C;
exports.QuestWebhookType = zt;
exports.QuestsProvider = Tr;
exports.TaskButtonType = O;
exports.TaskProvider = X;
exports.TaskRewardType = q;
exports.TaskType = T;
exports.TaskValidation = Vt;
exports.TaskWrapper = Ht;
exports.ThirdPartyProvider = S;
exports.errorMessages = x;
exports.getCurrentHrefWithoutQueryParams = Q;
exports.shouldRefetchParticipant = K;
exports.useGamesocial = y;
exports.useGamesocialState = _t;
exports.useMissions = $;
exports.useMissionsState = yt;
exports.useParticipant = M;
exports.useParticipantState = Mt;
exports.useTask = W;
exports.useTaskState = Dt;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tb2RlbHMvZW51bXMvcGFydGljaXBhbnRzLmVudW0udHMiLCIuLi9zcmMvbW9kZWxzL2VudW1zL3Rhc2tfYnV0dG9uX3R5cGUuZW51bS50cyIsIi4uL3NyYy9tb2RlbHMvZW51bXMvdGFza3MuZW51bS50cyIsIi4uL3NyYy9wcm92aWRlcnMvdGFzay50c3giLCIuLi9zcmMvcHJvdmlkZXJzL2dhbWVzb2NpYWwudHN4IiwiLi4vc3JjL2hvb2tzL3VzZUFwaS50cyIsIi4uL3NyYy91dGlscy9lcnJvcnMudHMiLCIuLi9zcmMvcHJvdmlkZXJzL21pc3Npb25zLnRzeCIsIi4uL3NyYy9wcm92aWRlcnMvcGFydGljaXBhbnQudHN4IiwiLi4vc3JjL21vZGVscy9lbnVtcy90YXNrX3Jld2FyZF90eXBlLmVudW0udHMiLCIuLi9zcmMvbW9kZWxzL2VudW1zL3RoaXJkX3BhcnR5LmVudW0udHMiLCIuLi9zcmMvdXRpbHMvdXRpbHMudHMiLCIuLi9zcmMvcHJvdmlkZXJzL3RoaXJkX3BhcnR5X2F1dGgudHN4IiwiLi4vc3JjL2NvbXBvbmVudHMvVGFza1dyYXBwZXIudHN4IiwiLi4vc3JjL21vZGVscy9lbnVtcy9taXNzaW9ucy5lbnVtLnRzIiwiLi4vc3JjL21vZGVscy9lbnVtcy9xdWVzdF93ZWJob29rX3R5cGUudHMiLCIuLi9zcmMvbW9kZWxzL2VudW1zL3Rhc2tfdmFsaWRhdGlvbi5lbnVtLnRzIiwiLi4vc3JjL3dyYXBwZXJzLnRzeCJdLCJuYW1lcyI6WyJQYXJ0aWNpcGFudFRhc2tTdGF0dXMiLCJQYXJ0aWNpcGFudE1pc3Npb25TdGF0dXMiLCJUYXNrQnV0dG9uVHlwZSIsIlRhc2tUeXBlIiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwianN4IiwiY29udGV4dCIsInVzZUdhbWVzb2NpYWwiLCJHYW1lc29jaWFsUHJvdmlkZXIiLCJjaGlsZHJlbiIsInN0YXRlIiwiYXBpS2V5IiwiYXBpVXJsIiwidXNlR2FtZXNvY2lhbFN0YXRlIiwiY29uZmlnIiwic2V0Q29uZmlnIiwiYXV0aFRva2VuIiwic2V0QXV0aFRva2VuIiwidG9rZW4iLCJwcmV2IiwiX19zcHJlYWRQcm9wcyIsIl9fc3ByZWFkVmFsdWVzIiwiYXhpb3MiLCJ1c2VFZmZlY3QiLCJ1c2VBcGkiLCJjcmVhdGVBcGkiLCJhcGkiLCJlcnJvciIsInJlc3BvbnNlIiwic2V0QXBpIiwiZXJyb3JNZXNzYWdlcyIsInNob3VsZFJlZmV0Y2hQYXJ0aWNpcGFudCIsInVzZU1pc3Npb25zIiwiTWlzc2lvbnNQcm92aWRlciIsInVzZU1pc3Npb25zU3RhdGUiLCJtaXNzaW9ucyIsInNldE1pc3Npb25zIiwidGFza3MiLCJzZXRUYXNrcyIsIm1haW50ZW5hbmNlIiwic2V0TWFpbnRlbmFuY2UiLCJnZXRNaXNzaW9ucyIsImdldFRhc2tzIiwibSIsIm1pc3Npb25JZHMiLCJwcm9taXNlcyIsImlkIiwicmVzcG9uc2VzIiwidmFsaWRUeXBlcyIsInIiLCJ0IiwidXBkYXRlVGFza1N0YXR1cyIsInRhc2tJZCIsInN0YXR1cyIsInRhc2siLCJnZXRUYXNrc0Zvck1pc3Npb24iLCJtaXNzaW9uSWQiLCJUYXNrUmV3YXJkVHlwZSIsInVzZVBhcnRpY2lwYW50IiwiUGFydGljaXBhbnRQcm92aWRlciIsImVycm9yQ2FsbGJhY2siLCJ1c2VQYXJ0aWNpcGFudFN0YXRlIiwicGFydGljaXBhbnQiLCJzZXRQYXJ0aWNpcGFudCIsImdldFBhcnRpY2lwYW50IiwidGhpcmRQYXJ0eSIsIl9hIiwicG9pbnRzIiwidXNlVGFzayIsIlRhc2tQcm92aWRlciIsInVzZVRhc2tTdGF0ZSIsImlzUGFydGljaXBhdGlvbkxvYWRpbmciLCJzZXRJc1BhcnRpY2lwYXRpb25Mb2FkaW5nIiwiYWRkUG9pbnRzIiwiaGFuZGxlRXJyb3IiLCJlIiwiX2IiLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJtZXNzYWdlIiwiYm9keSIsImNhbGxiYWNrIiwiX19hc3luYyIsImRhdGEiLCJiYXNlNjQiLCJibG9iIiwicmVhZGVyIiwicmVzIiwiVGhpcmRQYXJ0eVByb3ZpZGVyIiwiZ2V0Q3VycmVudEhyZWZXaXRob3V0UXVlcnlQYXJhbXMiLCJ1cmwiLCJkZWZhdWx0UHJvdmlkZXJTdGF0dXMiLCJwcm92aWRlciIsInVzZVRoaXJkUGFydHlBdXRoIiwiVGhpcmRQYXJ0eUF1dGhQcm92aWRlciIsInVzZVRoaXJkUGFydHlBdXRoU3RhdGUiLCJhdXRoZW50aWNhdGVkIiwic2V0QXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsIm5ld1N0YXR1cyIsIlRhc2tXcmFwcGVyQmFzZSIsInByb3BzIiwicGFydGljaXBhdGlvbkRpc2FibGVkIiwiY2FsbGJhY2tzIiwib25TdWNjZXNzIiwibGlua0NsaWNrZWQiLCJzZXRMaW5rQ2xpY2tlZCIsInBhcnRpY2lwYXRlIiwidGhpcmRQYXJ0eUF1dGgiLCJjb21wbGV0ZWQiLCJvbkxpbmtDbGljayIsImZpbGUiLCJvblBhcnRpY2lwYXRlIiwidmFsdWUiLCJzZWNvbmRzV2F0Y2hlZCIsImlzQXV0aGVudGljYXRlZCIsImF1dGhlbnRpY2F0ZSIsImhhbmRsZUNsaWNrIiwiZ2V0VHlwZSIsIlRhc2tXcmFwcGVyIiwiVGFza1dyYXBwZXJfZGVmYXVsdCIsIk1pc3Npb25UeXBlIiwiTWlzc2lvblJld2FyZFR5cGUiLCJRdWVzdFdlYmhvb2tUeXBlIiwiVGFza1ZhbGlkYXRpb24iLCJRdWVzdHNQcm92aWRlciJdLCJtYXBwaW5ncyI6Im9vQkFBTyxJQUFLQSxPQUNWQSxFQUFBLFFBQVUsVUFDVkEsRUFBQSxRQUFVLFVBQ1ZBLEVBQUEsVUFBWSxZQUNaQSxFQUFBLE9BQVMsU0FKQ0EsT0FBQSxJQU9BQyxRQUNWQSxFQUFBLFFBQVUsVUFDVkEsRUFBQSxRQUFVLFVBQ1ZBLEVBQUEsVUFBWSxZQUNaQSxFQUFBLE9BQVMsU0FKQ0EsUUFBQSxJQ1BMLElBQUtDLE9BQ1ZBLEVBQUEsZUFBaUIsaUJBQ2pCQSxFQUFBLE1BQVEsUUFDUkEs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QUFxRCxFQUF1QixZQUFBcEUsRUFBYSxjQUFBcUIsRUFBZSxVQUFBaUQsQ0FBVSxFQUN6RUgsRUFDRixPQUNFckcsRUFBQ2dFLEVBQUEsQ0FBYSxjQUFlVCxFQUMzQixTQUFBdkQsRUFBQzZGLEdBQUEsQ0FBdUIsY0FBZXRDLEVBQ3JDLFNBQUF2RCxFQUFDb0csR0FBQSxDQUNDLEtBQU1uRCxFQUNOLHNCQUF1QnFELEVBQ3ZCLFlBQWFwRSxFQUNiLFVBQVdtRSxFQUFNLFVBQ2pCLFVBQVdHLEVBRVYsU0FBQUgsRUFBTSxTQUNULEVBQ0YsRUFDRixDQUVKLEVBRU9tQixHQUFRRCxHQ3BSUixJQUFLRSxRQUNWQSxFQUFBLFdBQWEsYUFDYkEsRUFBQSxXQUFhLGFBQ2JBLEVBQUEsUUFBVSxVQUhBQSxRQUFBLElBTUFDLFFBQ1ZBLEVBQUEsT0FBUyxTQUNUQSxFQUFBLE9BQVMsU0FDVEEsRUFBQSxnQkFBa0Isa0JBSFJBLFFBQUEsSUNOTCxJQUFLQyxRQUNWQSxFQUFBLHlCQUEyQiwyQkFDM0JBLEVBQUEsMkJBQTZCLDZCQUM3QkEsRUFBQSwwQkFBNEIsNEJBQzVCQSxFQUFBLGVBQWlCLGlCQUpQQSxRQUFBLElDQUwsSUFBS0MsUUFDVkEsRUFBQSxNQUFRLFFBQ1JBLEVBQUEsU0FBVyxXQUZEQSxRQUFBLElDa0JKLGNBQUE1SCxNQUFBLG9CQWRELElBQU02SCxHQUFpQixDQUFDLENBQzdCLFNBQUF6SCxFQUNBLE9BQUFFLEVBQ0EsT0FBQUMsRUFDQSxjQUFBZ0QsQ0FDRixJQU9JdkQsRUFBQ0csRUFBQSxDQUFtQixPQUFRRyxFQUFRLE9BQVFDLEVBQzFDLFNBQUFQLEVBQUNzRCxFQUFBLENBQW9CLGNBQWVDLEVBQ2xDLFNBQUF2RCxFQUFDNEIsRUFBQSxDQUFrQixTQUFBeEIsRUFBUyxFQUM5QixFQUNGIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUGFydGljaXBhbnRUYXNrU3RhdHVzIHtcbiAgY3JlYXRlZCA9ICdjcmVhdGVkJyxcbiAgcGVuZGluZyA9ICdwZW5kaW5nJyxcbiAgY29tcGxldGVkID0gJ2NvbXBsZXRlZCcsXG4gIGZhaWxlZCA9ICdmYWlsZWQnLFxufVxuXG5leHBvcnQgZW51bSBQYXJ0aWNpcGFudE1pc3Npb25TdGF0dXMge1xuICBjcmVhdGVkID0gJ2NyZWF0ZWQnLFxuICBzdGFydGVkID0gJ3N0YXJ0ZWQnLFxuICBjb21wbGV0ZWQgPSAnY29tcGxldGVkJyxcbiAgZmFpbGVkID0gJ2ZhaWxlZCcsXG59XG4iLCJleHBvcnQgZW51bSBUYXNrQnV0dG9uVHlwZSB7XG4gIE5PX1BBUlRJQ0lQQU5UID0gXCJOT19QQVJUSUNJUEFOVFwiLCAvLyBJZiBub3QgcGFydGljaXBhbnQgaXMgZm91bmQuIFVzdWFsbHkgdGhhdCBtZWFucyB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZC5cbiAgU1RBUlQgPSBcIlNUQVJUXCIsIC8vIElmIHRoZSB0YXNrIGlzIG5vdCBjb21wbGV0ZWQgYW5kIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQuXG4gIENMQUlNID0gXCJDTEFJTVwiLCAvLyBJZiB0aGUgdGFzayBoYXMgYmVlbiBzdGFydGVkIGFuZCB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkLlxuICBQRU5ESU5HID0gXCJQRU5ESU5HXCIsIC8vIElmIHRoZSB0YXNrIGlzIHBlbmRpbmdcbiAgQ09NUExFVEVEID0gXCJDT01QTEVURURcIiwgLy8gSWYgdGhlIHRhc2sgaXMgY29tcGxldGVkXG4gIEZBSUxFRCA9IFwiRkFJTEVEXCIsIC8vIElmIHRoZSB0YXNrIGhhcyBmYWlsZWRcbiAgQVVUSF9SRVFVSVJFRCA9IFwiQVVUSF9SRVFVSVJFRFwiLCAvLyBJZiB0YXNrIHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uIGZpcnN0XG59XG4iLCJleHBvcnQgZW51bSBUYXNrVHlwZSB7XG4gIHRlbGVncmFtX2pvaW4gPSBcInRlbGVncmFtX2pvaW5cIixcbiAgdGVsZWdyYW1fY29ubmVjdCA9IFwidGVsZWdyYW1fY29ubmVjdFwiLFxuXG4gIHlvdXR1YmVfdmlldyA9IFwieW91dHViZV92aWV3XCIsXG4gIGltYWdlX3VwbG9hZCA9IFwiaW1hZ2VfdXBsb2FkXCIsXG5cbiAgdHdpdHRlcl9yZXBvc3QgPSBcInR3aXR0ZXJfcmVwb3N0XCIsXG4gIHR3aXR0ZXJfZm9sbG93ID0gXCJ0d2l0dGVyX2ZvbGxvd1wiLFxuICB0d2l0dGVyX3JlcGx5ID0gXCJ0d2l0dGVyX3JlcGx5XCIsXG4gIHR3aXR0ZXJfbGlrZSA9IFwidHdpdHRlcl9saWtlXCIsXG4gIHR3aXR0ZXJfYWN0aXZpdHkgPSBcInR3aXR0ZXJfYWN0aXZpdHlcIixcbiAgdHdpdHRlcl9jb25uZWN0ID0gXCJ0d2l0dGVyX2Nvbm5lY3RcIixcblxuICBkaXNjb3JkX2pvaW4gPSBcImRpc2NvcmRfam9pblwiLFxuICBkaXNjb3JkX2Nvbm5lY3QgPSBcImRpc2NvcmRfY29ubmVjdFwiLFxuXG4gIHN1Ym1pdF9zdHJpbmcgPSBcInN1Ym1pdF9zdHJpbmdcIixcbiAgbWFudWFsID0gXCJtYW51YWxcIixcblxuICBkYWlseV9sb2dpbiA9IFwiZGFpbHlfbG9naW5cIixcbiAgb3Blbl91cmwgPSBcIm9wZW5fdXJsXCIsXG4gIHlvdXR1YmVfc3Vic2NyaWJlID0gXCJ5b3V0dWJlX3N1YnNjcmliZVwiLFxuICB0d2l0Y2hfZm9sbG93ID0gXCJ0d2l0Y2hfZm9sbG93XCIsXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyB1c2VBcGkgfSBmcm9tIFwiQC9ob29rcy91c2VBcGlcIjtcbmltcG9ydCB7IFBhcnRpY2lwYW50VGFza1N0YXR1cyB9IGZyb20gXCJAL21vZGVscy9lbnVtcy9wYXJ0aWNpcGFudHMuZW51bVwiO1xuaW1wb3J0IHsgSVRhc2sgfSBmcm9tIFwiQC9tb2RlbHMvaW50ZXJmYWNlcy90YXNrXCI7XG5pbXBvcnQgeyBlcnJvck1lc3NhZ2VzLCBzaG91bGRSZWZldGNoUGFydGljaXBhbnQgfSBmcm9tIFwiQC91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IHVzZU1pc3Npb25zIH0gZnJvbSBcIi4vbWlzc2lvbnNcIjtcbmltcG9ydCB7IHVzZVBhcnRpY2lwYW50IH0gZnJvbSBcIi4vcGFydGljaXBhbnRcIjtcblxudHlwZSBUYXNrU3RhdGUgPSB7XG4gIGlzUGFydGljaXBhdGlvbkxvYWRpbmc6IGJvb2xlYW47XG4gIHBhcnRpY2lwYXRlOiAodGFzazogSVRhc2ssIGJvZHk/OiBhbnksIGNhbGxiYWNrPzogYW55KSA9PiBQcm9taXNlPGJvb2xlYW4+O1xufTtcblxuY29uc3QgY29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8VGFza1N0YXRlPih7XG4gIGlzUGFydGljaXBhdGlvbkxvYWRpbmc6IGZhbHNlLFxuICBwYXJ0aWNpcGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgdXNlVGFzayA9ICgpID0+IHVzZUNvbnRleHQoY29udGV4dCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrUHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgc3RhdGUsXG4gIGVycm9yQ2FsbGJhY2ssXG59OiB7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIHN0YXRlPzogVGFza1N0YXRlO1xuICBlcnJvckNhbGxiYWNrPzogKGVycm9yOiBhbnkpID0+IHZvaWQ7XG59KSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICBzdGF0ZSA/Pz0gdXNlVGFza1N0YXRlKGVycm9yQ2FsbGJhY2spO1xuICByZXR1cm4gPGNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3N0YXRlfT57Y2hpbGRyZW59PC9jb250ZXh0LlByb3ZpZGVyPjtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVRhc2tTdGF0ZSA9IChcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkXG4pOiBUYXNrU3RhdGUgPT4ge1xuICBjb25zdCBbaXNQYXJ0aWNpcGF0aW9uTG9hZGluZywgc2V0SXNQYXJ0aWNpcGF0aW9uTG9hZGluZ10gPVxuICAgIHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgeyB1cGRhdGVUYXNrU3RhdHVzIH0gPSB1c2VNaXNzaW9ucygpO1xuICBjb25zdCB7IGFkZFBvaW50cywgZ2V0UGFydGljaXBhbnQgfSA9IHVzZVBhcnRpY2lwYW50KCk7XG4gIGNvbnN0IGFwaSA9IHVzZUFwaSgpO1xuXG4gIGNvbnN0IGhhbmRsZUVycm9yID0gKGU6IGFueSkgPT4ge1xuICAgIGxldCBtZXNzYWdlOiBzdHJpbmcgPSBcIlwiO1xuICAgIGlmIChlPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSkge1xuICAgICAgaWYgKHR5cGVvZiBlPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBtZXNzYWdlID0gZT8ucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRvZG9cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGU/LnJlc3BvbnNlPy5tZXNzYWdlKSB7XG4gICAgICBtZXNzYWdlID0gZT8ucmVzcG9uc2U/Lm1lc3NhZ2UudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayhcIlNlcnZlciBlcnJvciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1lc3NhZ2UgaW4gZXJyb3JNZXNzYWdlcykge1xuICAgICAgICBjb25zdCBzID0gc2hvdWxkUmVmZXRjaFBhcnRpY2lwYW50KG1lc3NhZ2UpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgIC8vIFRPRE8gTWF5YmUgYXdhaXQgdGhpc1xuICAgICAgICAgIGdldFBhcnRpY2lwYW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKGVycm9yTWVzc2FnZXNbbWVzc2FnZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBwYXJ0aWNpcGF0ZSA9IGFzeW5jIChcbiAgICB0YXNrOiBJVGFzayxcbiAgICBib2R5PzogYW55LFxuICAgIGNhbGxiYWNrPzogYW55XG4gICk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIHNldElzUGFydGljaXBhdGlvbkxvYWRpbmcodHJ1ZSk7XG4gICAgbGV0IGRhdGEgPSB7IC4uLmJvZHkgfTtcbiAgICBpZiAoYm9keT8uZmlsZSkge1xuICAgICAgY29uc3QgYmFzZTY0ID0gYXdhaXQgZmV0Y2goYm9keS5maWxlKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJsb2IoKSlcbiAgICAgICAgLnRoZW4oKGJsb2IpID0+IHtcbiAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICByZXMocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLmJvZHksXG4gICAgICAgIGZpbGU6IHtcbiAgICAgICAgICBpbWFnZVNyYzogYmFzZTY0LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gICAgYXdhaXQgYXBpXG4gICAgICAucG9zdChgdGFza3MvJHt0YXNrLmlkfWAsIGJvZHkgPyBkYXRhIDogdW5kZWZpbmVkKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGFzay5pZCwgcmVzcG9uc2UuZGF0YS5zdGF0dXMpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IFBhcnRpY2lwYW50VGFza1N0YXR1cy5jb21wbGV0ZWQgJiZcbiAgICAgICAgICB0YXNrLnBvaW50c19yZXdhcmRcbiAgICAgICAgKSB7XG4gICAgICAgICAgYWRkUG9pbnRzKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRJc1BhcnRpY2lwYXRpb25Mb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaXNQYXJ0aWNpcGF0aW9uTG9hZGluZyxcbiAgICBwYXJ0aWNpcGF0ZSxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDYWxsYmFjaywgdXNlQ29udGV4dCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW50ZXJmYWNlIElDb25maWcge1xuICBhcGlVcmw6IHN0cmluZztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIHVzZXJBdXRoVG9rZW46IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cblxudHlwZSBHYW1lc29jaWFsU3RhdGUgPSB7XG4gIGFwaVVybDogc3RyaW5nO1xuICBhcGlLZXk6IHN0cmluZztcbiAgYXV0aFRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHNldEF1dGhUb2tlbjogKHRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHZvaWQ7XG59O1xuXG5jb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dDxHYW1lc29jaWFsU3RhdGU+KHtcbiAgYXBpVXJsOiBcIlwiLFxuICBhcGlLZXk6IFwiXCIsXG4gIGF1dGhUb2tlbjogdW5kZWZpbmVkLFxuICBzZXRBdXRoVG9rZW46ICgpID0+IHt9LFxufSk7XG5cbmV4cG9ydCBjb25zdCB1c2VHYW1lc29jaWFsID0gKCkgPT4gdXNlQ29udGV4dChjb250ZXh0KTtcblxuZXhwb3J0IGZ1bmN0aW9uIEdhbWVzb2NpYWxQcm92aWRlcih7XG4gIGNoaWxkcmVuLFxuICBzdGF0ZSxcbiAgYXBpS2V5LFxuICBhcGlVcmwsXG59OiB7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIHN0YXRlPzogR2FtZXNvY2lhbFN0YXRlO1xuICBhcGlLZXk6IHN0cmluZztcbiAgYXBpVXJsOiBzdHJpbmc7XG59KSB7XG4gIHN0YXRlID8/PSB1c2VHYW1lc29jaWFsU3RhdGUoYXBpS2V5LCBhcGlVcmwpO1xuICByZXR1cm4gPGNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3N0YXRlfT57Y2hpbGRyZW59PC9jb250ZXh0LlByb3ZpZGVyPjtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUdhbWVzb2NpYWxTdGF0ZSA9IChcbiAgYXBpS2V5OiBzdHJpbmcsXG4gIGFwaVVybDogc3RyaW5nXG4pOiBHYW1lc29jaWFsU3RhdGUgPT4ge1xuICBjb25zdCBbY29uZmlnLCBzZXRDb25maWddID0gdXNlU3RhdGU8SUNvbmZpZz4oe1xuICAgIGFwaVVybDogYXBpVXJsLFxuICAgIGFwaUtleTogYXBpS2V5LFxuICAgIHVzZXJBdXRoVG9rZW46IHVuZGVmaW5lZCxcbiAgfSk7XG5cbiAgY29uc3QgYXV0aFRva2VuID0gY29uZmlnLnVzZXJBdXRoVG9rZW47XG5cbiAgY29uc3Qgc2V0QXV0aFRva2VuID0gdXNlQ2FsbGJhY2soKHRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHtcbiAgICBzZXRDb25maWcoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgdXNlckF1dGhUb2tlbjogdG9rZW4sXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhcGlVcmwsXG4gICAgYXBpS2V5LFxuICAgIGF1dGhUb2tlbixcbiAgICBzZXRBdXRoVG9rZW4sXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgdXNlR2FtZXNvY2lhbCB9IGZyb20gXCJAL3Byb3ZpZGVycy9nYW1lc29jaWFsXCI7XG5pbXBvcnQgYXhpb3MsIHsgQXhpb3NJbnN0YW5jZSB9IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgY29uc3QgdXNlQXBpID0gKCkgPT4ge1xuICBjb25zdCB7IGF1dGhUb2tlbiwgYXBpVXJsLCBhcGlLZXkgfSA9IHVzZUdhbWVzb2NpYWwoKTtcblxuICBjb25zdCBjcmVhdGVBcGkgPSAoKTogQXhpb3NJbnN0YW5jZSA9PiB7XG4gICAgY29uc3QgYXBpID0gYXhpb3MuY3JlYXRlKHtcbiAgICAgIGJhc2VVUkw6IGFwaVVybCxcbiAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkFwaS1LZXlcIjogYXBpS2V5LFxuICAgICAgICBcIkFwaS1WZXJzaW9uXCI6IFwiMS4wXCIsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXBpLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShcbiAgICAgIChjb25maWcpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhdXRoVG9rZW47XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgfSxcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBhcGkuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShcbiAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidG9rZW5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBhcGk7XG4gIH07XG5cbiAgY29uc3QgW2FwaSwgc2V0QXBpXSA9IHVzZVN0YXRlPEF4aW9zSW5zdGFuY2U+KGNyZWF0ZUFwaSgpKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldEFwaShjcmVhdGVBcGkoKSk7XG4gIH0sIFthcGlVcmwsIGFwaUtleSwgYXV0aFRva2VuXSk7XG5cbiAgcmV0dXJuIGFwaTtcbn07XG4iLCJleHBvcnQgdHlwZSBFcnJvck1lc3NhZ2VzID0ge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgZXJyb3JNZXNzYWdlczogRXJyb3JNZXNzYWdlcyA9IHtcbiAgZGlzY29yZF9ub3RfY29ubmVjdGVkOiBcIkRpc2NvcmQgYWNjb3VudCBpcyBub3QgY29ubmVjdGVkXCIsXG4gIGRpc2NvcmRfZ3VpbGRfdXNlcl9ub3RfZm91bmQ6IFwiRGlzY29yZCB1c2VyIG5vdCBmb3VuZCBpbiBjaGFubmVsIFwiLFxuICBkaXNjb3JkX2d1aWxkX3JlcXVpcmVkX3JvbGVfbm90X2V4aXN0czpcbiAgICBcIkRpc2NvcmQgY2hhbm5lbCB2ZXJpZmljYXRpb24gbXVzdCBiZSBwYXNzZWRcIixcbiAgZGlzY29yZF9ndWlsZF91c2VyX2lzX3BlbmRpbmc6XG4gICAgXCJQbGVhc2UgdmFsaWRhdGUgdGhhdCB5b3VyIGFjY2VwdGVkIFRlcm1zIG9mIERpc2NvcmQgY2hhbm5lbFwiLFxuICBkaXNjb3JkX3VuYXV0aGVudGljYXRlZDogXCJQbGVhc2UgcmUtYXV0aGVudGljYXRlIHlvdXIgZGlzY29yZCBhY2NvdW50XCIsXG5cbiAgdGVsZWdyYW1fbm90X2Nvbm5lY3RlZDogXCJUZWxlZ3JhbSBhY2NvdW50IGlzIG5vdCBjb25uZWN0ZWRcIixcbiAgdGVsZWdyYW1fbWVtYmVyX25vdF9mb3VuZDogXCJUZWxlZ3JhbSBhY2NvdW50IG5vdCBmb3VuZCBpbiBncm91cFwiLFxuICB0ZWxlZ3JhbV91bmF1dGhlbnRpY2F0ZWQ6IFwiUGxlYXNlIHJlLWF1dGhlbnRpY2F0ZSB5b3VyIHRlbGVncmFtIGFjY291bnRcIixcblxuICB0d2l0dGVyX25vdF9jb25uZWN0ZWQ6IFwiWCBhY2NvdW50IGlzIG5vdCBjb25uZWN0ZWRcIixcbiAgdHdpdHRlcl9mb2xsb3dlcl9ub3RfZm91bmQ6IFwiWW91ciBYIGFjY291bnQgZG8gbm90IGZvbGxvdyByZXF1aXJlZCBhY2NvdW50XCIsXG4gIHR3aXR0ZXJfdW5hdXRoZW50aWNhdGVkOiBcIlBsZWFzZSByZS1hdXRoZW50aWNhdGUgeW91ciBYIGFjY291bnRcIixcblxuICB5b3V0dWJlX2ludmFsaWRfdmlkZW9fd2F0Y2hfbGVuZ3RoOiBcIlBsZWFzZSB3YXRjaCB3aG9sZSB2aWRlb1wiLFxuXG4gIGZpbGVfbm90X3Byb3ZpZGVkOiBcIkZpbGUgbm90IHByb3ZpZGVkXCIsXG4gIGZpbGVfc2l6ZV9leGNlZWRzOiBcIkZpbGUgc2l6ZSBleGNlZWRzIGxpbWl0XCIsXG4gIGludmFsaWRfZmlsZV90eXBlOiBcIkludmFsaWQgZmlsZSB0eXBlXCIsXG5cbiAgbWlzc2lvbl9ub3RfZm91bmQ6IFwiTWlzc2lvbiBub3QgZm91bmRcIixcbiAgbWlzc2lvbl9ub3Rfc3RhcnRlZDogXCJNaXNzaW9uIG5vdCBzdGFydGVkXCIsXG4gIG1pc3Npb25fZW5kZWQ6IFwiTWlzc2lvbiBlbmRlZFwiLFxuXG4gIHRhc2tfbm90X2ZvdW5kOiBcIlRhc2sgbm90IGZvdW5kXCIsXG4gIHRhc2tfaW5hY3RpdmU6IFwiVGFzayBpbmFjdGl2ZVwiLFxuXG4gIHBhcnRpY2lwYW50X25vdF9mb3VuZDogXCJQYXJ0aWNpcGFudCBub3QgZm91bmRcIixcblxuICB0aGlyZF9wYXJ0eV91bmF1dGhlbnRpY2F0ZWQ6IFwiUGxlYXNlIHJlLWF1dGhlbnRpY2F0ZSB5b3VyIGFjY291bnRcIixcblxuICBpbnZhbGlkX2VtYWlsOiBcIkludmFsaWQgZW1haWwgYWRkcmVzc1wiLFxuICBpbnZhbGlkX3ZhbHVlOiBcIkludmFsaWQgdmFsdWVcIixcbiAgaW52YWxpZF9jYXB0Y2hhOiBcIkludmFsaWQgY2FwdGNoYVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHNob3VsZFJlZmV0Y2hQYXJ0aWNpcGFudCA9IChlcnJvcjogc3RyaW5nKSA9PiB7XG4gIHJldHVybiAoXG4gICAgZXJyb3IgPT09IGVycm9yTWVzc2FnZXMuZGlzY29yZF91bmF1dGhlbnRpY2F0ZWQgfHxcbiAgICBlcnJvciA9PT0gZXJyb3JNZXNzYWdlcy50ZWxlZ3JhbV91bmF1dGhlbnRpY2F0ZWQgfHxcbiAgICBlcnJvciA9PT0gZXJyb3JNZXNzYWdlcy50d2l0dGVyX3VuYXV0aGVudGljYXRlZFxuICApO1xufTtcbiIsImltcG9ydCB7IHVzZUFwaSB9IGZyb20gXCJAL2hvb2tzL3VzZUFwaVwiO1xuaW1wb3J0IHsgUGFydGljaXBhbnRUYXNrU3RhdHVzIH0gZnJvbSBcIkAvbW9kZWxzL2VudW1zL3BhcnRpY2lwYW50cy5lbnVtXCI7XG5pbXBvcnQgeyBJTWlzc2lvbiB9IGZyb20gXCJAL21vZGVscy9pbnRlcmZhY2VzL21pc3Npb25cIjtcbmltcG9ydCB7IElUYXNrIH0gZnJvbSBcIkAvbW9kZWxzL2ludGVyZmFjZXMvdGFza1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlQ29udGV4dCxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUNvbnRleHQsXG4gIHVzZUVmZmVjdCxcbiAgdXNlU3RhdGUsXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVGFza1R5cGUgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IHVzZUdhbWVzb2NpYWwgfSBmcm9tIFwiLi9nYW1lc29jaWFsXCI7XG5cbnR5cGUgTWlzc2lvbnNTdGF0ZSA9IHtcbiAgbWlzc2lvbnM6IElNaXNzaW9uW107XG4gIHRhc2tzOiBJVGFza1tdO1xuICBnZXRUYXNrc0Zvck1pc3Npb246IChtaXNzaW9uSWQ6IHN0cmluZykgPT4gSVRhc2tbXTtcbiAgdXBkYXRlVGFza1N0YXR1czogKHRhc2tJZDogc3RyaW5nLCBzdGF0dXM6IFBhcnRpY2lwYW50VGFza1N0YXR1cykgPT4gdm9pZDtcbiAgbWFpbnRlbmFuY2U6IGJvb2xlYW47XG59O1xuXG5jb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dDxNaXNzaW9uc1N0YXRlPih7XG4gIG1pc3Npb25zOiBbXSxcbiAgdGFza3M6IFtdLFxuICBnZXRUYXNrc0Zvck1pc3Npb246ICgpID0+IFtdLFxuICB1cGRhdGVUYXNrU3RhdHVzOiAoKSA9PiB7fSxcbiAgbWFpbnRlbmFuY2U6IGZhbHNlLFxufSk7XG5cbmV4cG9ydCBjb25zdCB1c2VNaXNzaW9ucyA9ICgpID0+IHVzZUNvbnRleHQoY29udGV4dCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBNaXNzaW9uc1Byb3ZpZGVyKHtcbiAgY2hpbGRyZW4sXG4gIHN0YXRlLFxufToge1xuICBjaGlsZHJlbjogYW55O1xuICBzdGF0ZT86IE1pc3Npb25zU3RhdGU7XG59KSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICBzdGF0ZSA/Pz0gdXNlTWlzc2lvbnNTdGF0ZSgpO1xuICByZXR1cm4gPGNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3N0YXRlfT57Y2hpbGRyZW59PC9jb250ZXh0LlByb3ZpZGVyPjtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZU1pc3Npb25zU3RhdGUgPSAoKTogTWlzc2lvbnNTdGF0ZSA9PiB7XG4gIGNvbnN0IFttaXNzaW9ucywgc2V0TWlzc2lvbnNdID0gdXNlU3RhdGU8SU1pc3Npb25bXT4oW10pO1xuICBjb25zdCBbdGFza3MsIHNldFRhc2tzXSA9IHVzZVN0YXRlPElUYXNrW10+KFtdKTtcbiAgY29uc3QgeyBhdXRoVG9rZW4gfSA9IHVzZUdhbWVzb2NpYWwoKTtcbiAgY29uc3QgYXBpID0gdXNlQXBpKCk7XG5cbiAgY29uc3QgW21haW50ZW5hbmNlLCBzZXRNYWludGVuYW5jZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRNaXNzaW9ucygpO1xuICB9LCBbYXV0aFRva2VuXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWlzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZ2V0VGFza3MobWlzc2lvbnMubWFwKChtKSA9PiBtLmlkKSk7XG4gICAgfVxuICB9LCBbbWlzc2lvbnNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhdXRoVG9rZW4gJiYgYXV0aFRva2VuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2V0TWFpbnRlbmFuY2UodHJ1ZSk7XG4gICAgfVxuICB9LCBbYXV0aFRva2VuXSk7XG5cbiAgY29uc3QgZ2V0TWlzc2lvbnMgPSAoKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZ2V0KFwibWlzc2lvbnNcIilcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBzZXRNaXNzaW9ucyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRNYWludGVuYW5jZSh0cnVlKTtcbiAgICAgIH0pXG5cbiAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkXG4gICAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRUYXNrcyA9IChtaXNzaW9uSWRzOiBzdHJpbmdbXSkgPT4ge1xuICAgIGNvbnN0IHByb21pc2VzID0gbWlzc2lvbklkcy5tYXAoKGlkKSA9PiBhcGkuZ2V0KGBtaXNzaW9ucy8ke2lkfS90YXNrc2ApKTtcbiAgICBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZXMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRUeXBlcyA9IG5ldyBTZXQoT2JqZWN0LnZhbHVlcyhUYXNrVHlwZSkpO1xuICAgICAgICBjb25zdCB0YXNrcyA9IHJlc3BvbnNlc1xuICAgICAgICAgIC5tYXAoKHIpID0+IHIuZGF0YSlcbiAgICAgICAgICAuZmxhdCgpXG4gICAgICAgICAgLmZpbHRlcigodCkgPT4gdmFsaWRUeXBlcy5oYXModC50eXBlKSk7XG4gICAgICAgIHNldFRhc2tzKHRhc2tzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRNYWludGVuYW5jZSh0cnVlKTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVRhc2tTdGF0dXMgPSAodGFza0lkOiBzdHJpbmcsIHN0YXR1czogUGFydGljaXBhbnRUYXNrU3RhdHVzKSA9PiB7XG4gICAgc2V0VGFza3MoXG4gICAgICB0YXNrcy5tYXAoKHRhc2spID0+XG4gICAgICAgIHRhc2suaWQgPT09IHRhc2tJZCA/IHsgLi4udGFzaywgcGFydGljaXBhdGlvbjogeyBzdGF0dXMgfSB9IDogdGFza1xuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgZ2V0VGFza3NGb3JNaXNzaW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKG1pc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gdGFza3MuZmlsdGVyKCh0KSA9PiB0Lm1pc3Npb25faWQgPT09IG1pc3Npb25JZCk7XG4gICAgfSxcbiAgICBbdGFza3NdXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBtaXNzaW9ucyxcbiAgICB0YXNrcyxcbiAgICBnZXRUYXNrc0Zvck1pc3Npb24sXG4gICAgdXBkYXRlVGFza1N0YXR1cyxcbiAgICBtYWludGVuYW5jZSxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCB7IHVzZUFwaSB9IGZyb20gXCJAL2hvb2tzL3VzZUFwaVwiO1xuaW1wb3J0IHsgVGFza1Jld2FyZFR5cGUgfSBmcm9tIFwiQC9tb2RlbHMvZW51bXMvdGFza19yZXdhcmRfdHlwZS5lbnVtXCI7XG5pbXBvcnQgeyBJVGFzayB9IGZyb20gXCJAL21vZGVscy9pbnRlcmZhY2VzL3Rhc2tcIjtcbmltcG9ydCB7IFRoaXJkUGFydHlQcm92aWRlciB9IGZyb20gXCIuLi9tb2RlbHMvZW51bXMvdGhpcmRfcGFydHkuZW51bVwiO1xuaW1wb3J0IHsgSVBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL21vZGVscy9pbnRlcmZhY2VzL3BhcnRpY2lwYW50XCI7XG5pbXBvcnQgeyB1c2VHYW1lc29jaWFsIH0gZnJvbSBcIi4vZ2FtZXNvY2lhbFwiO1xuXG50eXBlIFBhcnRpY2lwYW50U3RhdGUgPSB7XG4gIHBhcnRpY2lwYW50PzogSVBhcnRpY2lwYW50O1xuICBpc1RoaXJkUGFydHlBdXRoZW50aWNhdGVkOiAodGhpcmRQYXJ0eTogVGhpcmRQYXJ0eVByb3ZpZGVyKSA9PiBib29sZWFuO1xuICBhZGRQb2ludHM6ICh0YXNrOiBJVGFzaykgPT4gdm9pZDtcbiAgZ2V0UGFydGljaXBhbnQ6ICgpID0+IHZvaWQ7XG59O1xuXG5jb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dDxQYXJ0aWNpcGFudFN0YXRlPih7XG4gIHBhcnRpY2lwYW50OiB1bmRlZmluZWQsXG4gIGlzVGhpcmRQYXJ0eUF1dGhlbnRpY2F0ZWQ6ICgpID0+IGZhbHNlLFxuICBhZGRQb2ludHM6ICgpID0+IHt9LFxuICBnZXRQYXJ0aWNpcGFudDogKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZVBhcnRpY2lwYW50ID0gKCkgPT4gdXNlQ29udGV4dChjb250ZXh0KTtcblxuZXhwb3J0IGZ1bmN0aW9uIFBhcnRpY2lwYW50UHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgc3RhdGUsXG4gIGVycm9yQ2FsbGJhY2ssXG59OiB7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIHN0YXRlPzogUGFydGljaXBhbnRTdGF0ZTtcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkO1xufSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgc3RhdGUgPz89IHVzZVBhcnRpY2lwYW50U3RhdGUoZXJyb3JDYWxsYmFjayk7XG4gIHJldHVybiA8Y29udGV4dC5Qcm92aWRlciB2YWx1ZT17c3RhdGV9PntjaGlsZHJlbn08L2NvbnRleHQuUHJvdmlkZXI+O1xufVxuXG5leHBvcnQgY29uc3QgdXNlUGFydGljaXBhbnRTdGF0ZSA9IChcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkXG4pOiBQYXJ0aWNpcGFudFN0YXRlID0+IHtcbiAgY29uc3QgW3BhcnRpY2lwYW50LCBzZXRQYXJ0aWNpcGFudF0gPSB1c2VTdGF0ZTxJUGFydGljaXBhbnQ+KCk7XG4gIGNvbnN0IHsgYXV0aFRva2VuIH0gPSB1c2VHYW1lc29jaWFsKCk7XG5cbiAgY29uc3QgYXBpID0gdXNlQXBpKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYXV0aFRva2VuKSB7XG4gICAgICBnZXRQYXJ0aWNpcGFudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRQYXJ0aWNpcGFudCh1bmRlZmluZWQpO1xuICAgIH1cbiAgfSwgW2F1dGhUb2tlbl0pO1xuXG4gIGNvbnN0IGdldFBhcnRpY2lwYW50ID0gKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmdldChgcGFydGljaXBhbnRzL21lYClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBzZXRQYXJ0aWNpcGFudChyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayhlcnJvcik7XG4gICAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpc1RoaXJkUGFydHlBdXRoZW50aWNhdGVkID0gKFxuICAgIHRoaXJkUGFydHk6IFRoaXJkUGFydHlQcm92aWRlclxuICApOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gISFwYXJ0aWNpcGFudD8uYXV0aGVudGljYXRlZC5pbmNsdWRlcyh0aGlyZFBhcnR5KTtcbiAgfTtcblxuICBjb25zdCBhZGRQb2ludHMgPSAodGFzazogSVRhc2spID0+IHtcbiAgICBpZiAoIXRhc2sucG9pbnRzX3Jld2FyZCkgcmV0dXJuO1xuXG4gICAgc2V0UGFydGljaXBhbnQoKHByZXYpID0+IHtcbiAgICAgIGlmICghcHJldikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIGlmICh0YXNrLnJld2FyZF90eXBlID09PSBUYXNrUmV3YXJkVHlwZS5wb2ludHMpIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gTWF0aC5mbG9vcihcbiAgICAgICAgICB0YXNrLnBvaW50c19yZXdhcmQhICogKHBhcnRpY2lwYW50Py5wb2ludHNfbXVsdGlwbGllciA/PyAxKVxuICAgICAgICApO1xuICAgICAgICBzZXRQYXJ0aWNpcGFudCgocHJldikgPT4ge1xuICAgICAgICAgIGlmICghcHJldikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIHBvaW50czogcHJldj8ucG9pbnRzICsgcG9pbnRzLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0UGFydGljaXBhbnQoKHByZXYpID0+IHtcbiAgICAgICAgICBpZiAoIXByZXYpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICBwb2ludHNfbXVsdGlwbGllcjogcHJldj8ucG9pbnRzX211bHRpcGxpZXIgKyB0YXNrLnBvaW50c19yZXdhcmQhLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcGFydGljaXBhbnQsXG4gICAgaXNUaGlyZFBhcnR5QXV0aGVudGljYXRlZCxcbiAgICBhZGRQb2ludHMsXG4gICAgZ2V0UGFydGljaXBhbnQsXG4gIH07XG59O1xuIiwiZXhwb3J0IGVudW0gVGFza1Jld2FyZFR5cGUge1xuICBwb2ludHMgPSBcInBvaW50c1wiLFxuICBtdWx0aXBsaWVyID0gXCJtdWx0aXBsaWVyXCIsXG59XG4iLCJleHBvcnQgZW51bSBUaGlyZFBhcnR5UHJvdmlkZXIge1xuICB0d2l0dGVyID0gXCJ0d2l0dGVyXCIsXG4gIHRlbGVncmFtID0gXCJ0ZWxlZ3JhbVwiLFxuICBkaXNjb3JkID0gXCJkaXNjb3JkXCIsXG59XG4iLCJleHBvcnQgY29uc3QgZ2V0Q3VycmVudEhyZWZXaXRob3V0UXVlcnlQYXJhbXMgPSAoKSA9PiB7XG4gIC8vIENyZWF0ZSBhIG5ldyBVUkwgb2JqZWN0IGJhc2VkIG9uIHdpbmRvdy5sb2NhdGlvblxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAvLyBTZXQgdGhlIHNlYXJjaCAocXVlcnkgcGFyYW1ldGVycykgdG8gYW4gZW1wdHkgc3RyaW5nIHRvIHJlbW92ZSBpdFxuICB1cmwuc2VhcmNoID0gXCJcIjtcblxuICAvLyBSZXR1cm4gdGhlIGhyZWYgd2l0aG91dCBxdWVyeSBwYXJhbWV0ZXJzXG4gIHJldHVybiB1cmwuaHJlZjtcbn07XG4iLCJpbXBvcnQgeyB1c2VBcGkgfSBmcm9tIFwiQC9ob29rcy91c2VBcGlcIjtcbmltcG9ydCB7IFRoaXJkUGFydHlQcm92aWRlciB9IGZyb20gXCJAL21vZGVscy9lbnVtcy90aGlyZF9wYXJ0eS5lbnVtXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50SHJlZldpdGhvdXRRdWVyeVBhcmFtcyB9IGZyb20gXCJAL3V0aWxzL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VQYXJ0aWNpcGFudCB9IGZyb20gXCIuL3BhcnRpY2lwYW50XCI7XG5cbnR5cGUgUHJvdmlkZXJTdGF0dXMgPSB7XG4gIFtrZXkgaW4gVGhpcmRQYXJ0eVByb3ZpZGVyXTogYm9vbGVhbjtcbn07XG5cbmNvbnN0IGRlZmF1bHRQcm92aWRlclN0YXR1czogUHJvdmlkZXJTdGF0dXMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gIE9iamVjdC52YWx1ZXMoVGhpcmRQYXJ0eVByb3ZpZGVyKS5tYXAoKHByb3ZpZGVyKSA9PiBbcHJvdmlkZXIsIGZhbHNlXSlcbikgYXMgUHJvdmlkZXJTdGF0dXM7XG5cbnR5cGUgVGhpcmRQYXJ0eUF1dGhTdGF0ZSA9IHtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBhdXRoZW50aWNhdGVkOiBQcm92aWRlclN0YXR1cztcbiAgYXV0aGVudGljYXRlOiAocHJvdmlkZXI6IFRoaXJkUGFydHlQcm92aWRlcikgPT4gdm9pZDtcbiAgaXNBdXRoZW50aWNhdGVkOiAocHJvdmlkZXI6IFRoaXJkUGFydHlQcm92aWRlcikgPT4gYm9vbGVhbjtcbn07XG5cbmNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFRoaXJkUGFydHlBdXRoU3RhdGU+KHtcbiAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgYXV0aGVudGljYXRlZDogZGVmYXVsdFByb3ZpZGVyU3RhdHVzLFxuICBhdXRoZW50aWNhdGU6ICgpID0+ICh7fSksXG4gIGlzQXV0aGVudGljYXRlZDogKCkgPT4gZmFsc2UsXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZVRoaXJkUGFydHlBdXRoID0gKCkgPT4gdXNlQ29udGV4dChjb250ZXh0KTtcblxuZXhwb3J0IGZ1bmN0aW9uIFRoaXJkUGFydHlBdXRoUHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgc3RhdGUsXG4gIGVycm9yQ2FsbGJhY2ssXG59OiB7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIHN0YXRlPzogVGhpcmRQYXJ0eUF1dGhTdGF0ZTtcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkO1xufSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgc3RhdGUgPz89IHVzZVRoaXJkUGFydHlBdXRoU3RhdGUoZXJyb3JDYWxsYmFjayk7XG4gIHJldHVybiA8Y29udGV4dC5Qcm92aWRlciB2YWx1ZT17c3RhdGV9PntjaGlsZHJlbn08L2NvbnRleHQuUHJvdmlkZXI+O1xufVxuXG5leHBvcnQgY29uc3QgdXNlVGhpcmRQYXJ0eUF1dGhTdGF0ZSA9IChcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkXG4pOiBUaGlyZFBhcnR5QXV0aFN0YXRlID0+IHtcbiAgY29uc3QgW2F1dGhlbnRpY2F0ZWQsIHNldEF1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGU8UHJvdmlkZXJTdGF0dXM+KFxuICAgIGRlZmF1bHRQcm92aWRlclN0YXR1c1xuICApO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSB1c2VQYXJ0aWNpcGFudCgpO1xuICBjb25zdCBhcGkgPSB1c2VBcGkoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5ld1N0YXR1czogUHJvdmlkZXJTdGF0dXMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QudmFsdWVzKFRoaXJkUGFydHlQcm92aWRlcikubWFwKChwcm92aWRlcikgPT4gW1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgISFwYXJ0aWNpcGFudD8uYXV0aGVudGljYXRlZC5pbmNsdWRlcyhwcm92aWRlciksXG4gICAgICBdKVxuICAgICkgYXMgUHJvdmlkZXJTdGF0dXM7XG5cbiAgICBzZXRBdXRoZW50aWNhdGVkKG5ld1N0YXR1cyk7XG4gIH0sIFtwYXJ0aWNpcGFudF0pO1xuXG4gIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IChwcm92aWRlcjogVGhpcmRQYXJ0eVByb3ZpZGVyKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWRbcHJvdmlkZXJdIHx8IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGF1dGhlbnRpY2F0ZSA9IChwcm92aWRlcjogVGhpcmRQYXJ0eVByb3ZpZGVyKTogdm9pZCA9PiB7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgICAgLmdldChgYXV0aC8ke3Byb3ZpZGVyfWAsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcmVkaXJlY3RfdXJsOiBnZXRDdXJyZW50SHJlZldpdGhvdXRRdWVyeVBhcmFtcygpLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS51cmwpIHtcbiAgICAgICAgICAvL2NoZWNrIGlmIHRoZXJlIGlzIGFuIGVycm9yIGluIHF1ZXJ5IHBhcmFtc1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnVybC5pbmNsdWRlcyhcIj9lcnJvcj1cIikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gYXV0aGVudGljYXRlIHdpdGggVGhpcmRQYXJ0eUF1dGg6IFwiICtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnVybC5zcGxpdChcIj9lcnJvcj1cIilbMV1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXNwb25zZS5kYXRhLnVybDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayhlcnJvcik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpc0xvYWRpbmcsXG4gICAgYXV0aGVudGljYXRlZCxcbiAgICBhdXRoZW50aWNhdGUsXG4gICAgaXNBdXRoZW50aWNhdGVkLFxuICB9O1xufTtcbiIsImltcG9ydCB7IFBhcnRpY2lwYW50VGFza1N0YXR1cyB9IGZyb20gXCJAL21vZGVscy9lbnVtcy9wYXJ0aWNpcGFudHMuZW51bVwiO1xuaW1wb3J0IHsgVGFza0J1dHRvblR5cGUgfSBmcm9tIFwiQC9tb2RlbHMvZW51bXMvdGFza19idXR0b25fdHlwZS5lbnVtXCI7XG5pbXBvcnQgeyBUYXNrVHlwZSB9IGZyb20gXCJAL21vZGVscy9lbnVtcy90YXNrcy5lbnVtXCI7XG5pbXBvcnQge1xuICBJRGlzY29yZEpvaW5NZXRhZGF0YSxcbiAgSU9wZW5VcmxNZXRhZGF0YSxcbiAgSVRhc2ssXG4gIElUZWxlZ3JhbUpvaW5NZXRhZGF0YSxcbiAgSVR3aXRjaEZvbGxvd01ldGFkYXRhLFxuICBJVHdpdHRlckZvbGxvd01ldGFkYXRhLFxuICBJVHdpdHRlckxpa2VNZXRhZGF0YSxcbiAgSVR3aXR0ZXJSZXBseU1ldGFkYXRhLFxuICBJVHdpdHRlclJlcG9zdE1ldGFkYXRhLFxuICBJWW91dHViZVN1YnNjcmliZU1ldGFkYXRhLFxuICBJWW91dHViZVZpZXdNZXRhZGF0YSxcbn0gZnJvbSBcIkAvbW9kZWxzL2ludGVyZmFjZXMvdGFza1wiO1xuaW1wb3J0IHsgVGFza1Byb3ZpZGVyLCB1c2VUYXNrIH0gZnJvbSBcIkAvcHJvdmlkZXJzL3Rhc2tcIjtcbmltcG9ydCB7XG4gIFRoaXJkUGFydHlBdXRoUHJvdmlkZXIsXG4gIHVzZVRoaXJkUGFydHlBdXRoLFxufSBmcm9tIFwiQC9wcm92aWRlcnMvdGhpcmRfcGFydHlfYXV0aFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRoaXJkUGFydHlQcm92aWRlciB9IGZyb20gXCIuLlwiO1xuXG5pbnRlcmZhY2UgVGFza0NhbGxiYWNrcyB7XG4gIG9uWW91dHViZVZpZXc6ICh0YXNrOiBJVGFzaywgdmlkZW9JZDogc3RyaW5nKSA9PiBQcm9taXNlPG51bWJlcj47XG4gIG9uRmlsZVVwbG9hZDogKHRhc2s6IElUYXNrKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIG9uU3VibWl0U3RyaW5nOiAodGFzazogSVRhc2spID0+IFByb21pc2U8c3RyaW5nPjtcbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgdGFzazogSVRhc2s7XG4gIHBhcnRpY2lwYXRpb25EaXNhYmxlZDogYm9vbGVhbjtcbiAgbWFpbnRlbmFuY2U6IGJvb2xlYW47XG4gIGNoaWxkcmVuOiAocHJvcHM6IHtcbiAgICBvbkNsaWNrPzogKGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB2b2lkO1xuICAgIHR5cGU6IFRhc2tCdXR0b25UeXBlO1xuICAgIGlzTG9hZGluZz86IGJvb2xlYW47XG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIH0pID0+IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgY2FsbGJhY2tzOiBUYXNrQ2FsbGJhY2tzO1xuICBlcnJvckNhbGxiYWNrPzogKGVycm9yOiBhbnkpID0+IHZvaWQ7XG4gIG9uU3VjY2Vzcz86ICgpID0+IHZvaWQ7XG59O1xuXG5jb25zdCBUYXNrV3JhcHBlckJhc2U6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wczogUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIHRhc2ssXG4gICAgcGFydGljaXBhdGlvbkRpc2FibGVkLFxuICAgIG1haW50ZW5hbmNlLFxuICAgIGNoaWxkcmVuLFxuICAgIGNhbGxiYWNrcyxcbiAgICBvblN1Y2Nlc3MsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgW2xpbmtDbGlja2VkLCBzZXRMaW5rQ2xpY2tlZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgY29uc3QgeyBwYXJ0aWNpcGF0ZSwgaXNQYXJ0aWNpcGF0aW9uTG9hZGluZyB9ID0gdXNlVGFzaygpO1xuXG4gIGNvbnN0IHRoaXJkUGFydHlBdXRoID0gdXNlVGhpcmRQYXJ0eUF1dGgoKTtcblxuICBjb25zdCBjb21wbGV0ZWQgPVxuICAgIHRhc2sucGFydGljaXBhdGlvbiAmJlxuICAgIHRhc2sucGFydGljaXBhdGlvbi5zdGF0dXMgPT09IFBhcnRpY2lwYW50VGFza1N0YXR1cy5jb21wbGV0ZWQ7XG5cbiAgY29uc3Qgb25MaW5rQ2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgc3dpdGNoICh0YXNrLnR5cGUpIHtcbiAgICAgIGNhc2UgVGFza1R5cGUuZGlzY29yZF9qb2luOlxuICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAodGFzay5tZXRhZGF0YSBhcyBJRGlzY29yZEpvaW5NZXRhZGF0YSkuaW52aXRlX3VybCxcbiAgICAgICAgICBcIl9ibGFua1wiXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX2ZvbGxvdzpcbiAgICAgICAgd2luZG93Lm9wZW4oXG4gICAgICAgICAgYGh0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L2ZvbGxvdz9zY3JlZW5fbmFtZT0ke1xuICAgICAgICAgICAgKHRhc2subWV0YWRhdGEgYXMgSVR3aXR0ZXJGb2xsb3dNZXRhZGF0YSkudXNlcm5hbWVcbiAgICAgICAgICB9YCxcbiAgICAgICAgICBcIl9ibGFua1wiXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX2xpa2U6XG4gICAgICAgIHdpbmRvdy5vcGVuKCh0YXNrLm1ldGFkYXRhIGFzIElUd2l0dGVyTGlrZU1ldGFkYXRhKS5wb3N0X3VybCwgXCJfYmxhbmtcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX3JlcGx5OlxuICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAodGFzay5tZXRhZGF0YSBhcyBJVHdpdHRlclJlcGx5TWV0YWRhdGEpLnBvc3RfdXJsLFxuICAgICAgICAgIFwiX2JsYW5rXCJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRhc2tUeXBlLnR3aXR0ZXJfcmVwb3N0OlxuICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICBgaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvcmV0d2VldD90d2VldF9pZD0ke1xuICAgICAgICAgICAgKHRhc2subWV0YWRhdGEgYXMgSVR3aXR0ZXJSZXBvc3RNZXRhZGF0YSkucG9zdF9pZFxuICAgICAgICAgIH1gLFxuICAgICAgICAgIFwiX2JsYW5rXCJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRhc2tUeXBlLnRlbGVncmFtX2pvaW46XG4gICAgICAgIHdpbmRvdy5vcGVuKFxuICAgICAgICAgIGBodHRwczovL3QubWUvJHsodGFzay5tZXRhZGF0YSBhcyBJVGVsZWdyYW1Kb2luTWV0YWRhdGEpLnVzZXJuYW1lfWAsXG4gICAgICAgICAgXCJfYmxhbmtcIlxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGFza1R5cGUuaW1hZ2VfdXBsb2FkOlxuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgY2FsbGJhY2tzLm9uRmlsZVVwbG9hZCh0YXNrKTtcbiAgICAgICAgb25QYXJ0aWNpcGF0ZSh7XG4gICAgICAgICAgZmlsZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgVGFza1R5cGUuc3VibWl0X3N0cmluZzpcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBjYWxsYmFja3Mub25TdWJtaXRTdHJpbmcodGFzayk7XG4gICAgICAgIG9uUGFydGljaXBhdGUoe1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBUYXNrVHlwZS5vcGVuX3VybDpcbiAgICAgICAgd2luZG93Lm9wZW4oKHRhc2subWV0YWRhdGEgYXMgSU9wZW5VcmxNZXRhZGF0YSkudXJsLCBcIl9ibGFua1wiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRhc2tUeXBlLnlvdXR1YmVfdmlldzpcbiAgICAgICAgY29uc3Qgc2Vjb25kc1dhdGNoZWQgPSBhd2FpdCBjYWxsYmFja3Mub25Zb3V0dWJlVmlldyhcbiAgICAgICAgICB0YXNrLFxuICAgICAgICAgICh0YXNrLm1ldGFkYXRhIGFzIElZb3V0dWJlVmlld01ldGFkYXRhKS52aWRlb19pZFxuICAgICAgICApO1xuICAgICAgICBvblBhcnRpY2lwYXRlKHtcbiAgICAgICAgICBzZWNvbmRzOiBzZWNvbmRzV2F0Y2hlZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgVGFza1R5cGUuZGFpbHlfbG9naW46XG4gICAgICAgIG9uUGFydGljaXBhdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0Y2hfZm9sbG93OlxuICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAodGFzay5tZXRhZGF0YSBhcyBJVHdpdGNoRm9sbG93TWV0YWRhdGEpLnR3aXRjaF91cmwsXG4gICAgICAgICAgXCJfYmxhbmtcIlxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGFza1R5cGUueW91dHViZV9zdWJzY3JpYmU6XG4gICAgICAgIHdpbmRvdy5vcGVuKFxuICAgICAgICAgICh0YXNrLm1ldGFkYXRhIGFzIElZb3V0dWJlU3Vic2NyaWJlTWV0YWRhdGEpLmNoYW5uZWxfdXJsLFxuICAgICAgICAgIFwiX2JsYW5rXCJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc2V0TGlua0NsaWNrZWQodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gKCkgPT4ge1xuICAgIHN3aXRjaCAodGFzay50eXBlKSB7XG4gICAgICBjYXNlIFRhc2tUeXBlLmRpc2NvcmRfY29ubmVjdDpcbiAgICAgIGNhc2UgVGFza1R5cGUuZGlzY29yZF9qb2luOlxuICAgICAgICByZXR1cm4gdGhpcmRQYXJ0eUF1dGguaXNBdXRoZW50aWNhdGVkKFRoaXJkUGFydHlQcm92aWRlci5kaXNjb3JkKTtcbiAgICAgIGNhc2UgVGFza1R5cGUudHdpdHRlcl9jb25uZWN0OlxuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX2ZvbGxvdzpcbiAgICAgIGNhc2UgVGFza1R5cGUudHdpdHRlcl9saWtlOlxuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX3JlcGx5OlxuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX3JlcG9zdDpcbiAgICAgICAgcmV0dXJuIHRoaXJkUGFydHlBdXRoLmlzQXV0aGVudGljYXRlZChUaGlyZFBhcnR5UHJvdmlkZXIudHdpdHRlcik7XG4gICAgICBjYXNlIFRhc2tUeXBlLnRlbGVncmFtX2Nvbm5lY3Q6XG4gICAgICBjYXNlIFRhc2tUeXBlLnRlbGVncmFtX2pvaW46XG4gICAgICAgIHJldHVybiB0aGlyZFBhcnR5QXV0aC5pc0F1dGhlbnRpY2F0ZWQoVGhpcmRQYXJ0eVByb3ZpZGVyLnRlbGVncmFtKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBhdXRoZW50aWNhdGUgPSAoKSA9PiB7XG4gICAgc3dpdGNoICh0YXNrLnR5cGUpIHtcbiAgICAgIGNhc2UgVGFza1R5cGUuZGlzY29yZF9jb25uZWN0OlxuICAgICAgY2FzZSBUYXNrVHlwZS5kaXNjb3JkX2pvaW46XG4gICAgICAgIHJldHVybiB0aGlyZFBhcnR5QXV0aC5hdXRoZW50aWNhdGUoVGhpcmRQYXJ0eVByb3ZpZGVyLmRpc2NvcmQpO1xuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX2Nvbm5lY3Q6XG4gICAgICBjYXNlIFRhc2tUeXBlLnR3aXR0ZXJfZm9sbG93OlxuICAgICAgY2FzZSBUYXNrVHlwZS50d2l0dGVyX2xpa2U6XG4gICAgICBjYXNlIFRhc2tUeXBlLnR3aXR0ZXJfcmVwbHk6XG4gICAgICBjYXNlIFRhc2tUeXBlLnR3aXR0ZXJfcmVwb3N0OlxuICAgICAgICByZXR1cm4gdGhpcmRQYXJ0eUF1dGguYXV0aGVudGljYXRlKFRoaXJkUGFydHlQcm92aWRlci50d2l0dGVyKTtcbiAgICAgIGNhc2UgVGFza1R5cGUudGVsZWdyYW1fY29ubmVjdDpcbiAgICAgIGNhc2UgVGFza1R5cGUudGVsZWdyYW1fam9pbjpcbiAgICAgICAgcmV0dXJuIHRoaXJkUGFydHlBdXRoLmF1dGhlbnRpY2F0ZShUaGlyZFBhcnR5UHJvdmlkZXIudGVsZWdyYW0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvblBhcnRpY2lwYXRlID0gYXN5bmMgKGJvZHk/OiBhbnkpID0+IHtcbiAgICBjb25zdCByZXNwID0gYXdhaXQgcGFydGljaXBhdGUodGFzaywgYm9keSwgb25TdWNjZXNzKTtcbiAgICBpZiAoIXJlc3ApIHtcbiAgICAgIHNldExpbmtDbGlja2VkKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKHBhcnRpY2lwYXRpb25EaXNhYmxlZCB8fCBtYWludGVuYW5jZSB8fCBjb21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgYXV0aGVudGljYXRlKCk7XG4gICAgfSBlbHNlIGlmIChsaW5rQ2xpY2tlZCkge1xuICAgICAgb25QYXJ0aWNpcGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbkxpbmtDbGljaygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRUeXBlID0gKCkgPT4ge1xuICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiBUYXNrQnV0dG9uVHlwZS5DT01QTEVURUQ7XG4gICAgfVxuXG4gICAgaWYgKCF0YXNrLnBhcnRpY2lwYXRpb24pIHtcbiAgICAgIHJldHVybiBUYXNrQnV0dG9uVHlwZS5OT19QQVJUSUNJUEFOVDtcbiAgICB9XG5cbiAgICBpZiAodGFzay5wYXJ0aWNpcGF0aW9uPy5zdGF0dXMgPT09IFBhcnRpY2lwYW50VGFza1N0YXR1cy5wZW5kaW5nKSB7XG4gICAgICByZXR1cm4gVGFza0J1dHRvblR5cGUuUEVORElORztcbiAgICB9XG5cbiAgICBpZiAodGFzay5wYXJ0aWNpcGF0aW9uPy5zdGF0dXMgPT09IFBhcnRpY2lwYW50VGFza1N0YXR1cy5mYWlsZWQpIHtcbiAgICAgIHJldHVybiBUYXNrQnV0dG9uVHlwZS5GQUlMRUQ7XG4gICAgfVxuXG4gICAgaWYgKGxpbmtDbGlja2VkKSB7XG4gICAgICByZXR1cm4gVGFza0J1dHRvblR5cGUuQ0xBSU07XG4gICAgfVxuXG4gICAgaWYgKGlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICByZXR1cm4gVGFza0J1dHRvblR5cGUuU1RBUlQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFRhc2tCdXR0b25UeXBlLkFVVEhfUkVRVUlSRUQ7XG4gIH07XG5cbiAgY29uc3Qgbm9PbkNsaWNrID0gKCkgPT4ge1xuICAgIGlmIChjb21wbGV0ZWQgfHwgbWFpbnRlbmFuY2UgfHwgcGFydGljaXBhdGlvbkRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGFzay50eXBlID09PSBUYXNrVHlwZS5tYW51YWwgfHxcbiAgICAgIHRhc2sudHlwZSA9PT0gVGFza1R5cGUudHdpdHRlcl9hY3Rpdml0eVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gY2hpbGRyZW4oe1xuICAgIG9uQ2xpY2s6ICFub09uQ2xpY2soKSA/IGhhbmRsZUNsaWNrIDogdW5kZWZpbmVkLFxuICAgIHR5cGU6IGdldFR5cGUoKSxcbiAgICBpc0xvYWRpbmc6IHRoaXJkUGFydHlBdXRoLmlzTG9hZGluZyB8fCBpc1BhcnRpY2lwYXRpb25Mb2FkaW5nLFxuICAgIGRpc2FibGVkOiBwYXJ0aWNpcGF0aW9uRGlzYWJsZWQgfHwgbWFpbnRlbmFuY2UsXG4gICAgY29tbWVudDogdGFzay5wYXJ0aWNpcGF0aW9uPy5jb21tZW50LFxuICB9KTtcbn07XG5cbmNvbnN0IFRhc2tXcmFwcGVyOiBSZWFjdC5GQzxQcm9wcz4gPSAocHJvcHM6IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGFzaywgcGFydGljaXBhdGlvbkRpc2FibGVkLCBtYWludGVuYW5jZSwgZXJyb3JDYWxsYmFjaywgb25TdWNjZXNzIH0gPVxuICAgIHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxUYXNrUHJvdmlkZXIgZXJyb3JDYWxsYmFjaz17ZXJyb3JDYWxsYmFja30+XG4gICAgICA8VGhpcmRQYXJ0eUF1dGhQcm92aWRlciBlcnJvckNhbGxiYWNrPXtlcnJvckNhbGxiYWNrfT5cbiAgICAgICAgPFRhc2tXcmFwcGVyQmFzZVxuICAgICAgICAgIHRhc2s9e3Rhc2t9XG4gICAgICAgICAgcGFydGljaXBhdGlvbkRpc2FibGVkPXtwYXJ0aWNpcGF0aW9uRGlzYWJsZWR9XG4gICAgICAgICAgbWFpbnRlbmFuY2U9e21haW50ZW5hbmNlfVxuICAgICAgICAgIGNhbGxiYWNrcz17cHJvcHMuY2FsbGJhY2tzfVxuICAgICAgICAgIG9uU3VjY2Vzcz17b25TdWNjZXNzfVxuICAgICAgICA+XG4gICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICA8L1Rhc2tXcmFwcGVyQmFzZT5cbiAgICAgIDwvVGhpcmRQYXJ0eUF1dGhQcm92aWRlcj5cbiAgICA8L1Rhc2tQcm92aWRlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tXcmFwcGVyO1xuIiwiZXhwb3J0IGVudW0gTWlzc2lvblR5cGUge1xuICBndWFyYW50ZWVkID0gXCJndWFyYW50ZWVkXCIsXG4gIHNjb3JlYm9hcmQgPSBcInNjb3JlYm9hcmRcIixcbiAgbG90dGVyeSA9IFwibG90dGVyeVwiLFxufVxuXG5leHBvcnQgZW51bSBNaXNzaW9uUmV3YXJkVHlwZSB7XG4gIGNyeXB0byA9IFwiY3J5cHRvXCIsXG4gIHBvaW50cyA9IFwicG9pbnRzXCIsXG4gIHBvaW50c19wZXJfdGFzayA9IFwicG9pbnRzX3Blcl90YXNrXCIsXG59XG4iLCJleHBvcnQgZW51bSBRdWVzdFdlYmhvb2tUeXBlIHtcbiAgcGFydGljaXBhbnRfcmV3YXJkX2FkZGVkID0gJ3BhcnRpY2lwYW50X3Jld2FyZF9hZGRlZCcsXG4gIHBhcnRpY2lwYW50X3Jld2FyZF9yZW1vdmVkID0gJ3BhcnRpY2lwYW50X3Jld2FyZF9yZW1vdmVkJyxcbiAgdGhpcmRfcGFydHlfYXV0aGVudGljYXRlZCA9ICd0aGlyZF9wYXJ0eV9hdXRoZW50aWNhdGVkJyxcbiAgdGFza19jb21wbGV0ZWQgPSAndGFza19jb21wbGV0ZWQnLFxufVxuIiwiZXhwb3J0IGVudW0gVGFza1ZhbGlkYXRpb24ge1xuICBlbWFpbCA9IFwiZW1haWxcIixcbiAgaXNfZXF1YWwgPSBcImlzX2VxdWFsXCIsXG59XG4iLCJpbXBvcnQgeyBHYW1lc29jaWFsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMvZ2FtZXNvY2lhbFwiO1xuaW1wb3J0IHsgTWlzc2lvbnNQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy9taXNzaW9uc1wiO1xuaW1wb3J0IHsgUGFydGljaXBhbnRQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy9wYXJ0aWNpcGFudFwiO1xuXG5leHBvcnQgY29uc3QgUXVlc3RzUHJvdmlkZXIgPSAoe1xuICBjaGlsZHJlbixcbiAgYXBpS2V5LFxuICBhcGlVcmwsXG4gIGVycm9yQ2FsbGJhY2ssXG59OiB7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIGFwaUtleTogc3RyaW5nO1xuICBhcGlVcmw6IHN0cmluZztcbiAgZXJyb3JDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkO1xufSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxHYW1lc29jaWFsUHJvdmlkZXIgYXBpS2V5PXthcGlLZXl9IGFwaVVybD17YXBpVXJsfT5cbiAgICAgIDxQYXJ0aWNpcGFudFByb3ZpZGVyIGVycm9yQ2FsbGJhY2s9e2Vycm9yQ2FsbGJhY2t9PlxuICAgICAgICA8TWlzc2lvbnNQcm92aWRlcj57Y2hpbGRyZW59PC9NaXNzaW9uc1Byb3ZpZGVyPlxuICAgICAgPC9QYXJ0aWNpcGFudFByb3ZpZGVyPlxuICAgIDwvR2FtZXNvY2lhbFByb3ZpZGVyPlxuICApO1xufTtcbiJdfQ==